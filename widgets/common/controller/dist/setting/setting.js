define(["jimu-core","jimu-ui","jimu-layouts/layout-runtime","jimu-ui/advanced/setting-components","jimu-for-builder","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker"],(function(e,n,t,i,a,o,l){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(n){return e[n]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=345)}({0:function(n,t){n.exports=e},1:function(e,t){e.exports=n},11:function(e,n){e.exports=l},17:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DROP_ZONE_PLACEHOLDER_WIDTH=5,n.BASE_LAYOUT_NAME="controller",n.CONTAINER_LAYOUT_NAME="_openwidget",n.MIN_WIDGET_WIDTH=150,n.MIN_WIDGET_HEIGHT=50,n.LABEL_HEIGHT=21,n.WIDGET_ITEM_SIZES={sm:24,default:32,lg:48}},2:function(e,n){e.exports=t},26:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(0),a=t(2),o=i.React.useMemo,l=i.ReactRedux.useSelector;n.getWidgetIdsFromLayout=function(e){return n.getVisibleOrderFromLayout(e).map((function(n){var t,i;return null===(i=null===(t=e.content)||void 0===t?void 0:t[n])||void 0===i?void 0:i.widgetId}))},n.getVisibleOrderFromLayout=function(e){var n=(e.order&&e.order.asMutable()||[]).map((function(n){var t;return null===(t=e.content)||void 0===t?void 0:t[n]}));return(n=n.filter((function(e){return e&&!e.isPending}))).map((function(e){return null==e?void 0:e.id}))},n.useWidgetIdsOfControllerLayout=function(e,t){var i=n.useWidgetLayout(e,t);return o((function(){return n.getWidgetIdsFromLayout(i)}),[i])},n.useWidgetLayout=function(e,n){return l((function(t){var i,o,l,r=null===(o=null===(i=(t=t.appContext.isBuilder?t.appStateInBuilder:t).appConfig.widgets)||void 0===i?void 0:i[e])||void 0===o?void 0:o.layouts,s=a.searchUtils.findLayoutId(r[n],t.browserSizeMode,t.appConfig.mainSizeMode);return null===(l=t.appConfig.layouts)||void 0===l?void 0:l[s]}))}},3:function(e,n){e.exports=i},345:function(e,n,t){"use strict";var i=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e};Object.defineProperty(n,"__esModule",{value:!0});var a,o=t(0),l=t(5),r=t(3),s=t(2),c=t(53),u=t(1),d=t(346),p=t(347),v=t(11),f=t(7),m=t(26),g=t(17),h=o.ReactRedux.useSelector,y=t(49),w=t(50),b=o.css(a||(a=i(["\n    font-size: 13px;\n    font-weight: lighter;\n    .setting-row-item {\n      width: 100%;\n      display: flex;\n      margin-top: 0.5rem;\n      > span.jimu-radio {\n        flex-shrink: 0;\n        margin-top: 0.1rem;\n      }\n      > label {\n        margin-bottom: 0;\n      }\n    }\n    .font-setting-row {\n      display: flex;\n      align-items: center;\n    }\n    .jimu-multi-select {\n      width: 100%;\n      > .jimu-dropdown {\n        width: 100%;\n      }\n      > .jimu-menu-item {\n        width: 100%;\n        height: ",";\n      }\n    }\n  "],["\n    font-size: 13px;\n    font-weight: lighter;\n    .setting-row-item {\n      width: 100%;\n      display: flex;\n      margin-top: 0.5rem;\n      > span.jimu-radio {\n        flex-shrink: 0;\n        margin-top: 0.1rem;\n      }\n      > label {\n        margin-bottom: 0;\n      }\n    }\n    .font-setting-row {\n      display: flex;\n      align-items: center;\n    }\n    .jimu-multi-select {\n      width: 100%;\n      > .jimu-dropdown {\n        width: 100%;\n      }\n      > .jimu-menu-item {\n        width: 100%;\n        height: ",";\n      }\n    }\n  "])),o.polished.rem(26)),x=function(e,n){var t,i,a,o,l,r=(null===(i=null===(t=null==n?void 0:n.appearance)||void 0===t?void 0:t.card.avatar)||void 0===i?void 0:i.type)||"primary",s=null===(l=null===(o=null===(a=null==e?void 0:e.components)||void 0===a?void 0:a.button)||void 0===o?void 0:o.variants)||void 0===l?void 0:l[r];return s=(s=s.setIn(["default","color"],"#080808")).setIn(["active","color"],"#080808")};n.default=function(e){var n,t,i,a,j,S,T,I,k,C,N,_,O,R,L,M=e.id,P=e.config,B=e.theme,A=e.onSettingChange,E=null===(n=null==P?void 0:P.behavior)||void 0===n?void 0:n.onlyOpenOne,D=null===(t=null==P?void 0:P.behavior)||void 0===t?void 0:t.displayType,W=null===(i=null==P?void 0:P.behavior)||void 0===i?void 0:i.vertical,z=null===(a=null==P?void 0:P.behavior)||void 0===a?void 0:a.openStarts,H=null===(j=null==P?void 0:P.appearance)||void 0===j?void 0:j.space,F=null===(S=null==P?void 0:P.appearance)||void 0===S?void 0:S.advanced,G=null===(T=null==P?void 0:P.appearance.card)||void 0===T?void 0:T.showLabel,V=null!==(k=null===(I=null==P?void 0:P.appearance.card)||void 0===I?void 0:I.labelGrowth)&&void 0!==k?k:0,U=null===(N=null===(C=null==P?void 0:P.appearance.card)||void 0===C?void 0:C.avatar)||void 0===N?void 0:N.size,Y=null===(O=null===(_=null==P?void 0:P.appearance.card)||void 0===_?void 0:_.avatar)||void 0===O?void 0:O.shape,Z=null!==(R=null==z?void 0:z[0])&&void 0!==R?R:"none",K=W?H:V,q=h((function(e){return e.appStateInBuilder.theme})),J=function(e,n){var t=m.useWidgetIdsOfControllerLayout(e,n),i=h((function(e){return e.appStateInBuilder.appConfig.widgets}));return o.Immutable(t||[]).map((function(e){var n;return{label:null===(n=i[e])||void 0===n?void 0:n.label,value:e}}))}(M,g.BASE_LAYOUT_NAME),Q=u.hooks.useTranslate(u.defaultMessages),X=u.hooks.useTranslate(s.defaultMessages),$=u.hooks.useTranslate(d.default),ee=F?null===(L=null==P?void 0:P.appearance)||void 0===L?void 0:L.card.variant:x(q,P),ne=null==ee?void 0:ee.default,te=null==ee?void 0:ee.active,ie=null==ee?void 0:ee.hover,ae=function(e,n){var t=null;t=Array.isArray(e)?P.setIn(e,n):P.set(e,n),A({id:M,config:t})},oe=function(e,n,t){if(e.currentTarget.checked){var i=null;"onlyOpenOne"===n?i=P.setIn(["behavior","openStarts"],o.Immutable([])).setIn(["behavior",n],t):"displayType"===n&&(t=t?c.DisplayType.Stack:c.DisplayType.SideBySide,i=P.setIn(["behavior",n],t)),A({id:M,config:i})}},le=function(e){var n=P.setIn(["behavior","vertical"],e).setIn(["appearance","card","labelGrowth"],0);e||(n=n.setIn(["appearance","space"],10)),A({id:M,config:n}),l.getAppConfigAction().exchangeWidthAndHeight().exec()};return o.jsx("div",{className:"widget-setting-controller jimu-widget-setting",css:b},o.jsx(r.SettingSection,null,o.jsx(r.SettingRow,{flow:"no-wrap",label:$("direction")},o.jsx(u.ButtonGroup,null,o.jsx(u.Button,{title:$("horizontal"),type:"secondary",icon:!0,size:"sm",active:!W,onClick:function(){return le(!1)}},o.jsx(u.Icon,{icon:y})),o.jsx(u.Button,{title:$("vertical"),type:"secondary",icon:!0,size:"sm",active:W,onClick:function(){return le(!0)}},o.jsx(u.Icon,{icon:w}))))),o.jsx(r.SettingSection,{title:$("behavior")},o.jsx(r.SettingRow,{flow:"wrap",label:$("openWidget")},o.jsx("div",{className:"setting-row-item"},o.jsx(u.Radio,{id:"only-open-one",style:{cursor:"pointer"},name:"only-open-one",onChange:function(e){return oe(e,"onlyOpenOne",!0)},checked:E}),o.jsx(u.Label,{style:{cursor:"pointer"},for:"only-open-one",className:"ml-2"},Q("single"))),o.jsx("div",{className:"setting-row-item"},o.jsx(u.Radio,{id:"open-multiple",style:{cursor:"pointer"},name:"only-open-one",onChange:function(e){return oe(e,"onlyOpenOne",!1)},checked:!E}),o.jsx(u.Label,{style:{cursor:"pointer"},for:"open-multiple",className:"ml-2"},Q("multiple")))),o.jsx(r.SettingRow,{flow:"wrap",label:$("openStart")},!E&&o.jsx(u.MultiSelect,{values:z,items:J,onClickItem:function(e,n,t){var i=E?t.length?[n]:[]:t;ae(["behavior","openStarts"],i)},displayByValues:function(e){if(E&&e.length){var n=J.find((function(n){return n.value===e[0]}));return null==n?void 0:n.label}var t=(null==e?void 0:e.length)||0;return $("widgetsSelected",{widgetNumber:t})}}),E&&o.jsx(u.Select,{value:Z,onChange:function(e){var n=e.target.value,t=[];"none"!==n&&(t=[n]),ae(["behavior","openStarts"],t)},className:"w-100"},o.jsx("option",{value:"none"},Q("none")),null==J?void 0:J.map((function(e){return o.jsx("option",{key:e.value,value:e.value},e.label)})))),!E&&o.jsx(r.SettingRow,{flow:"wrap",label:$("displayType")},o.jsx("div",{className:"setting-row-item"},o.jsx(u.Radio,{id:"display-stack",style:{cursor:"pointer"},name:"display-type",onChange:function(e){return oe(e,"displayType",!0)},checked:D===c.DisplayType.Stack}),o.jsx(u.Label,{style:{cursor:"pointer"},for:"display-stack",className:"ml-2"},X("stack"))),o.jsx("div",{className:"setting-row-item"},o.jsx(u.Radio,{id:"display-side-by-side",style:{cursor:"pointer"},name:"display-type",onChange:function(e){return oe(e,"displayType",!1)},checked:D===c.DisplayType.SideBySide}),o.jsx(u.Label,{style:{cursor:"pointer"},for:"display-side-by-side",className:"ml-2"},$("sideBySide"))))),o.jsx(r.SettingSection,{title:$("appearance",!0)},o.jsx(r.SettingRow,{flow:"wrap",label:$("iconStyle")},o.jsx(p.Shapes,{type:p.ShapeType.Circle,title:Q("circle",!0),className:"mr-2",active:"circle"===Y,theme:B,onClick:function(){return ae(["appearance","card","avatar","shape"],"circle")}}),o.jsx(p.Shapes,{type:p.ShapeType.Rectangle,title:Q("rectangle"),active:"rectangle"===Y,theme:B,onClick:function(){return ae(["appearance","card","avatar","shape"],"rectangle")}})),o.jsx(r.SettingRow,{label:$("showIconLabel")},o.jsx(u.Switch,{checked:G,onChange:function(e){return ae(["appearance","card","showLabel"],e.target.checked)}})),o.jsx(r.SettingRow,{flow:"no-wrap",label:$("iconSize")},o.jsx(u.Select,{value:U,onChange:function(e){return ae(["appearance","card","avatar","size"],e.target.value)},className:"w-50"},o.jsx("option",{value:"sm"},Q("small")),o.jsx("option",{value:"default"},Q("medium")),o.jsx("option",{value:"lg"},Q("large")))),o.jsx(r.SettingRow,{flow:"no-wrap",label:$("iconInterval")},o.jsx(u.NumericInput,{className:"w-50",min:0,max:999,value:K,showHandlers:!1,onAcceptValue:function(e){e=+e,isNaN(e)&&(e=0);var n=P;n=n.behavior.vertical?n.setIn(["appearance","space"],e).setIn(["appearance","card","labelGrowth"],0):n.setIn(["appearance","card","labelGrowth"],e).setIn(["appearance","space"],0),A({id:M,config:n})}}))),o.jsx(r.SettingSection,null,o.jsx(r.SettingRow,{flow:"no-wrap",label:$("advance")},o.jsx(u.Switch,{checked:F,onChange:function(){var e,n=!(null===(e=null==P?void 0:P.appearance)||void 0===e?void 0:e.advanced),t=P.setIn(["appearance","advanced"],n);if(n){var i=x(q,P);t=t.setIn(["appearance","card","variant"],i)}else t=t.setIn(["appearance","card","variant"],void 0);A({id:M,config:t})}})),F&&o.jsx(r.SettingRow,{label:$("states"),flow:"wrap"},o.jsx(u.Tabs,{pills:!0,className:"flex-grow-1 w-100 h-100",fill:!0},o.jsx(u.Tab,{id:"regular",className:"tab-title-item",defaultActive:!0,title:$("regular")},o.jsx(r.SettingRow,{className:"mt-2",label:$("textFormat"),flow:"no-wrap"},o.jsx("div",{className:"font-setting-row"},o.jsx(f.FontStyle,{bold:null==ne?void 0:ne.bold,italic:null==ne?void 0:ne.italic,underline:null==ne?void 0:ne.underline,strike:null==ne?void 0:ne.strike,onChange:function(e,n){return ae(["appearance","card","variant","default",e],n)}}),o.jsx(v.ThemeColorPicker,{specificTheme:q,value:null==ne?void 0:ne.color,onChange:function(e){return ae(["appearance","card","variant","default","color"],e)}}))),o.jsx(r.SettingRow,{className:"mt-2",label:$("iconBackground"),flow:"no-wrap"},o.jsx(v.ThemeColorPicker,{specificTheme:q,value:null==ne?void 0:ne.bg,onChange:function(e){return ae(["appearance","card","variant","default","bg"],e)}}))),o.jsx(u.Tab,{id:"selected",className:"tab-title-item",title:$("selected")},o.jsx(r.SettingRow,{className:"mt-2",label:$("textFormat"),flow:"no-wrap"},o.jsx("div",{className:"font-setting-row"},o.jsx(f.FontStyle,{bold:null==te?void 0:te.bold,italic:null==te?void 0:te.italic,underline:null==te?void 0:te.underline,strike:null==te?void 0:te.strike,onChange:function(e,n){return ae(["appearance","card","variant","active",e],n)}}),o.jsx(v.ThemeColorPicker,{specificTheme:q,value:null==te?void 0:te.color,onChange:function(e){return ae(["appearance","card","variant","active","color"],e)}}))),o.jsx(r.SettingRow,{className:"mt-2",label:$("iconBackground"),flow:"no-wrap"},o.jsx(v.ThemeColorPicker,{specificTheme:q,value:null==te?void 0:te.bg,onChange:function(e){return ae(["appearance","card","variant","active","bg"],e)}}))),o.jsx(u.Tab,{id:"jover",className:"tab-title-item",title:$("hover")},o.jsx(r.SettingRow,{className:"mt-2",label:$("textFormat"),flow:"no-wrap"},o.jsx("div",{className:"font-setting-row"},o.jsx(f.FontStyle,{bold:null==ie?void 0:ie.bold,italic:null==ie?void 0:ie.italic,underline:null==ie?void 0:ie.underline,strike:null==ie?void 0:ie.strike,onChange:function(e,n){return ae(["appearance","card","variant","hover",e],n)}}),o.jsx(v.ThemeColorPicker,{specificTheme:q,value:null==ie?void 0:ie.color,onChange:function(e){return ae(["appearance","card","variant","hover","color"],e)}}))),o.jsx(r.SettingRow,{className:"mt-2",label:$("iconBackground"),flow:"no-wrap"},o.jsx(v.ThemeColorPicker,{specificTheme:q,value:null==ie?void 0:ie.bg,onChange:function(e){return ae(["appearance","card","variant","hover","bg"],e)}})))))))}},346:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={_widgetLabel:"Widget Controller",behavior:"Behavior",openWidget:"How many widgets can be opened",displayType:"Display type",sideBySide:"Side by side",iconStyle:"Icon style",showIconLabel:"Show label",iconInterval:"Icons interval",openStart:"Open widgets when the page is loaded",widgetsSelected:"{widgetNumber} widgets selected"}},347:function(e,n,t){"use strict";var i=this&&this.__makeTemplateObject||function(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e};Object.defineProperty(n,"__esModule",{value:!0});var a,o=t(0);!function(e){e[e.Circle=0]="Circle",e[e.Rectangle=1]="Rectangle"}(a=n.ShapeType||(n.ShapeType={}));var l;n.Shapes=function(e){var n=e.className,t=e.title,r=e.type,s=e.active,c=e.theme,u=e.onClick,d=function(e){var n=null==e?void 0:e.colors.white,t=null==e?void 0:e.colors.palette.primary[700],a=null==e?void 0:e.colors.palette.dark[900];return o.React.useMemo((function(){return o.css(l||(l=i(["\n    background-color: ",";\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: ",";\n    height: ",";\n    margin: 2px;\n    &.active{\n      outline: 2px "," solid;\n    }\n    .inner {\n      width: 66%;\n      height: 66%;\n      border: 1px "," solid;\n      border-radius: 2px;\n      &.circle {\n        border-radius: 50%;\n      }\n    }\n  "],["\n    background-color: ",";\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: ",";\n    height: ",";\n    margin: 2px;\n    &.active{\n      outline: 2px "," solid;\n    }\n    .inner {\n      width: 66%;\n      height: 66%;\n      border: 1px "," solid;\n      border-radius: 2px;\n      &.circle {\n        border-radius: 50%;\n      }\n    }\n  "])),n,o.polished.rem(28),o.polished.rem(28),t,a)}),[n,t,a])}(c);return o.jsx("div",{css:d,onClick:u,title:t,className:o.classNames("choose-shape",{active:s},n)},o.jsx("div",{className:o.classNames("inner",{rectangle:r===a.Rectangle},{circle:r===a.Circle})}))}},49:function(e,n){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M2 8c0-.291.231-.527.516-.527h9.508L8.527 3.9a.535.535 0 010-.746.508.508 0 01.73 0L14 8l-4.743 4.846a.508.508 0 01-.73 0 .535.535 0 010-.746l3.497-3.573H2.516A.522.522 0 012 8z" fill="#000" fill-rule="nonzero"></path></svg>'},5:function(e,n){e.exports=a},50:function(e,n){e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M8 2c.291 0 .527.231.527.516v9.508L12.1 8.527a.535.535 0 01.746 0 .508.508 0 010 .73L8 14 3.154 9.257a.508.508 0 010-.73.535.535 0 01.746 0l3.573 3.497V2.516C7.473 2.231 7.709 2 8 2z" fill="#000" fill-rule="nonzero"></path></svg>'},53:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(n.DisplayType||(n.DisplayType={}))},7:function(e,n){e.exports=o}})}));